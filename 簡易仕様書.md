# 簡易仕様書
## 作者
秋葉 貴文
## アプリ名
RadarEat

### コンセプト
日常に小さな発見を  
現在地周辺の飲食店を素早く検索できる。

### こだわったポイント
現在地周辺の飲食店を素早く見つけられる操作性を重視しました。  
検索条件を「現在地からの距離」に絞ることで、日常の行動圏外にある魅力的なお店との偶然の出会いが生まれると考えています。

### 該当プロジェクトのリポジトリ URL（GitHub）
https://github.com/tarryGrain0/RadarEat.git

## 開発環境
- M2 macbook Air
- VS Code  1.98.2  
- Docker Desktop 4.25.2  
- Docker Engine v24.0.6  
- Docker Compose version v2.23.0-desktop.1  

## 開発言語・フレームワーク
**バックエンド**  
- Ruby 3.2.2
- Ruby on Rails 8.0.2（APIモード）  
 
**フロントエンド**  
- TypeScript 5.8.3
- Next.js 15.2.4
- React 19.0.0
- Tailwind CSS 4.1.3

## テーブル定義(ER図)などの設計ドキュメント（ウェブアプリ）
以下は、本システムにおけるユーザーとブックマークのテーブル構造を示したER図です。

- ユーザー（users）は複数のブックマーク（bookmarks）を所有します。
- ブックマークはHotpepper API上の `restaurant_id` に対応します。

![ER図](./ER.png)

[users]
- id : int (PK)
- email : string (unique)
- password_digest : string
- created_at : datetime
- updated_at : datetime

[bookmarks]
- id : int (PK)
- user_id : int (FK → users.id)
- restaurant_id : string (Hotpepper APIの店舗ID)
- created_at : datetime
- updated_at : datetime

users (1) ─────▶ (N) bookmarks

## 開発環境構築手順(ウェブアプリ)
### 前提条件
- Dockerがインストールされていること
- Hotpepper API の API キーを取得済みであること
  - [Hotpepper Webサービス](https://webservice.recruit.co.jp/)にて取得可能
  
### 環境構築手順
1. プロジェクトのクローン
> git clone https://github.com/tarryGrain0/RadarEat.git  
> cd RadarEat

2. .envファイルの作成
> cp backend/.env.example backend/.env
- `.env`ファイルを開き、Hotpepper APIキーを`HOTPEPPER_API_KEY`に設定してください

3. Docker環境
> docker compose up --build

4. Railsのセットアップ
> docker compose exec -it backend sh  
> bundle install  
> rails db:create db:migrate  

5. アクセス確認
`https://localhost`にアクセスし、画面が表示されることを確認する


## 動作対象端末・OS/ブラウザ
### 動作検証済みOS
macOS Sequoia 15.3.2

### 動作検証済みブラウザ
Google Chrome 135.0.7049.42

## 開発期間
8日間

## アプリケーション機能
### 機能一覧
- **レストラン検索**：Geolocation API を用いて取得した現在地情報と、ホットペッパーグルメサーチAPIを組み合わせ、現在地周辺の飲食店を検索します。
- **レストラン情報取得**：ホットペッパーグルメサーチAPIを使用して、飲食店の詳細情報（住所・営業時間・アクセスなど）を取得・表示します。
- **ブックマーク**：ホットペッパーグルメサーチAPIで取得した店舗IDとユーザーIDを紐づけることで、気になる飲食店をブックマークに保存できます。
- **ユーザー登録**：メールアドレスとパスワードを入力することで、ユーザーアカウントの新規登録を行います。
- **ログイン機能**：登録済みのメールアドレスとパスワードによりユーザー認証を行い、ログイン状態を保持します。

### 画面一覧
- **トップページ (/)**
  - サービス概要と使い方の説明を記載
  - 現在からすぐに周辺の飲食店を検索可能（ボタンを設置）
  
- **検索/一覧画面 (/search)**
  - 検索範囲を指定してレストランを検索する
  - 検索結果一覧を表示する
  
- **店舗詳細画面 (/detail)**
  - 店舗の詳細情報を表示する
  - ブックマークに登録することができる
  
- **ブックマーク一覧画面 (/bookmarks)**
  - ブックマークに登録した店舗を一覧表示する
  
- **ログイン画面 (/login)**
  - ユーザーログインができる
  
- **サインアップ画面 (/signup)**
  - 新規ユーザー登録ができる

## 使用しているAPI,SDK,ライブラリなど
- ホットペッパーグルメサーチAPI
- Geolocation API
- react-icons

## デザイン面でこだわったポイント
- 柔らかく親しみやすい印象を演出するため、暖色系のオレンジを基調とした配色で全体のトーンに統一感を持たせました。
- Tailwind CSS を活用し、モバイル操作を意識したUI設計を行いました。スマートフォンからの利用でも操作しやすいよう、要素の配置やサイズ感にこだわっています。
- react-icons を使用して、直感的なアイコンを導入し、ユーザーが迷わず操作できるよう配慮しました。

## 技術面でアドバイスして欲しいポイント
ページ遷移や描画タイミングにおいて一時的なちらつきが発生しており、UX向上のために問題の解消を行いたい

## 今後実装したい機能
- ユーザー設定機能（/settings）
  - ユーザー削除
  - パスワード変更
- 一覧表示機能
  - 表示順番のソート機能
- 詳細画面
  - 地図表示機能

## ログイン状態とUI表示に関する注意点と改善策
### 現状の懸念点
- ログイン判定が document.cookie 上の authToken の有無だけに依存しているため、任意の文字列を設定することで「ログイン済み」と誤判定される恐れがある。
- 実際の保護されたデータ取得や操作は API サーバー側で適切にブロックされているため、セキュリティ上の大きな問題はないものの、UI上の誤解や不正操作の誘因となる可能性がある。

## 改善方針
- 単に authToken の有無だけでログイン判定するのではなく、認証済みのトークンであるかをAPI経由で確認する。
- ログイン後やページロード時に GET /api/auth 等を叩き、ユーザー情報が取得できたらログイン済みと判定し、それに基づいて UI を切り替える。
- トークンが不正または期限切れだった場合は、UI上でも未ログイン扱いとし、ブックマークなどのUI要素を非表示にする。

## 自己評価
本プロジェクトでは、現在地周辺の飲食店を素早く見つけられる操作性を重視し、機能性・操作性・UIの一貫性にこだわりました。
特に、「現在地をもとにした検索」というコンセプトに基づき、最小限の操作で店舗に出会える体験を提供できるよう、検索条件のシンプルさやレスポンシブデザインに注力しました。
また、ユーザー登録機能を追加することで、気になる飲食店、お気に入りの飲食店をブックマークして保存できる体験にもこだわりました。

ログイン認証まわりの課題や、UXに関わる画面のちらつきといった技術的な改善点は残っていますが、当初のコンセプトを軸に据えたアプリケーションの実装を実現できたと考えています。